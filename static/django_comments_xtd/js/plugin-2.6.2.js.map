{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"React\"","webpack:///external \"django\"","webpack:///external \"jQuery\"","webpack:///external \"ReactDOM\"","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/lib.js","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/commentform.jsx","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/comment.jsx","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/commentbox.jsx","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","React","django","jQuery","ReactDOM","jquery_ajax_setup","csrf_cookie_name","$","ajaxSetup","beforeSend","xhr","settings","method","type","test","this","crossDomain","setRequestHeader","cookieValue","document","cookie","cookies","split","trim","substring","decodeURIComponent","getCookie","CommentForm","props","state","email","url","followup","comment","reply_to","visited","errors","previewing","alert","message","cssc","handle_input_change","handle_blur","handle_submit","handle_preview","reset_form","fhelp","className","gettext","event","target","checked","iname","setState","field","is_authenticated","request_name","request_email_address","div_cssc","input_cssc","help","placeholder","required","id","maxLength","onChange","onBlur","label_cssc","htmlFor","help_cssc","helptext_style","helptext","fontSize","style","label","elem_id","status","css_class","202","204","403","on_comment_created","preventDefault","validate","content_type","form","object_pk","timestamp","security_hash","honeypot","ajax","send_url","dataType","cache","success","textStatus","indexOf","handle_submit_response","error","err","responseJSON","forEach","item","idx","array","console","toString","rawMarkup","Remarkable","render","__html","heading_name","avatar_url","md5","toLowerCase","avatar_img","src","height","width","href","current_user","header_text","header","nowtext","dangerouslySetInnerHTML","render_field_comment","render_field_name","mail","render_field_email","render_field_url","render_field_followup","btns_row_class","btn_submit_class","btn_preview_class","btn_label_preview","btn_label_send","onSubmit","defaultValue","display","onClick","preview","render_preview","div_class","alert_div","render_form","Component","Comment","flags","like","active","users","dislike","removal","count","user","join","flag","reduce_flags","removal_count","like_users","dislike_users","reply_form","component","is_visible","action_like","action_dislike","handle_reply_click","username","user_name","moderator","user_url","is_removed","user_moderator","flagging_count","flagging_html","moderate_html","can_moderate","fmts","ngettext","text","interpolate","title","allow_flagging","inapp_msg","flag_url","replace","login_url","remove_msg","delete_url","dir","allow_feedback","attr_list","show_users_chunk","show_feedback","current_user_id","user_ids","map","pos","data-toggle","class_icon","click_hdl","opinion","who_can_post","feedback_id","disposeTooltips","like_feedback","_get_feedback_chunk","dislike_feedback","submit_status","visible","make_form_invisible","reply_url","reply_label","extra_space","cls","feedback_url","statusCode","201","non_field_errors","_post_feedback","location","like_url","dislike_url","elem","parentElement","querySelector","getElementById","is_hover","tooltip","html","selector","comment_id","_get_username_chunk","right_div","_get_right_div_chunk","comment_body","render_comment_body","feedback_btns","reply_link","render_feedback_btns","_get_reply_link_chunk","render_reply_form","new_label","newcids","children","user_avatar","submit_date","permalink","CommentBox","lib","tree","cids","counter","comment_count","handle_comment_created","handle_update","load_comments","allow_comments","html_id_suffix","_id","undefined","innerHTML","diff","Array","order","comments","incids","curcids","get_children","cid","index","level","parent_id","list_url","create_tree","count_url","polling_interval","setInterval","load_count","comment_counter","render_comment_counter","update_alert","render_update_alert","comment_form","render_comment_form","nodes","createElement","assign","comments_props","comments_props_override"],"mappings":"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","file":"plugin-2.6.2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([9,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = React;","module.exports = django;","module.exports = jQuery;","module.exports = ReactDOM;","import $ from 'jquery';\n\nexport function getCookie(name) {\n  var cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    var cookies = document.cookie.split(';');\n    for (var i = 0; i < cookies.length; i++) {\n      var cookie = jQuery.trim(cookies[i]);\n      // Does this cookie string begin with the name we want?\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\nexport function csrfSafeMethod(method) {\n  // these HTTP methods do not require CSRF protection\n  return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n}\n\nexport function jquery_ajax_setup(csrf_cookie_name) {\n  $.ajaxSetup({\n    beforeSend: function(xhr, settings) {\n      if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n        xhr.setRequestHeader(\"X-CSRFToken\", getCookie(csrf_cookie_name));\n      }\n    }\n  });\n}\n","import $ from 'jquery';\nimport django from 'django';\n\nimport md5 from 'md5';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Remarkable } from 'remarkable';\n\nimport * as lib from './lib.js';\n\n\nexport class CommentForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '', email: '', url: '', followup: false, comment: '',\n      reply_to: this.props.reply_to || 0,\n      visited: {name: false, email: false, comment: false},\n      errors: {name: false, email: false, comment: false},\n      previewing: false,\n      alert: {message: '', cssc: ''}\n    };\n    this.handle_input_change = this.handle_input_change.bind(this);\n    this.handle_blur = this.handle_blur.bind(this);\n    this.handle_submit = this.handle_submit.bind(this);\n    this.handle_preview = this.handle_preview.bind(this);\n    this.reset_form = this.reset_form.bind(this);\n    this.fhelp = <span className=\"form-text small invalid-feedback\">\n                   {django.gettext(\"This field is required.\")}\n                 </span>;\n  }\n\n  handle_input_change(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const iname = target.name;\n\n    this.setState({[iname]: value});\n  }\n\n  handle_blur(field) {\n    function handler(event) {\n      var visited = this.state.visited;\n      visited[field] = true;\n      this.setState({visited: visited});\n    };\n    return handler.bind(this);\n  }\n\n  validate() {\n    var errors = this.state.errors;\n    errors.name = false;\n    errors.email = false;\n\n    if(!this.state.comment.length)\n      errors.comment = true;\n    else errors.comment = false;\n    if(!this.props.is_authenticated || this.props.request_name) {\n      if(/^\\s*$/.test(this.state.name))\n        errors.name = true;\n      else errors.name = false;\n    }\n    if(!this.props.is_authenticated || this.props.request_email_address) {\n      if(/\\S+@\\S+\\.\\S+/.test(this.state.email))\n        errors.email = false;\n      else errors.email = true;\n    }\n    this.setState({errors: errors});\n\n    if(this.state.errors.comment ||\n       this.state.errors.name ||\n       this.state.errors.email)\n      return false;\n    else return true;\n  }\n\n  render_field_comment() {\n    let div_cssc = \"form-group row\",\n        input_cssc = \"form-control\",\n        help = \"\";\n    if (this.state.reply_to > 0) {\n      input_cssc += \" form-control-sm\";\n    }\n    if (this.state.errors.comment) {\n      div_cssc += (this.state.errors.comment ? \" has-danger\" : \"\");\n      input_cssc += \" is-invalid\";\n      help = this.fhelp;\n    }\n    var placeholder = django.gettext(\"Your comment\");\n    return (\n      <div className={div_cssc}>\n        <div className=\"offset-md-1 col-md-10\">\n          <textarea required name=\"comment\" id=\"id_comment\"\n                    placeholder={placeholder} maxLength=\"3000\"\n                    className={input_cssc} value={this.state.comment}\n                    onChange={this.handle_input_change}\n                    onBlur={this.handle_blur('comment')} />\n          {help}\n        </div>\n      </div>\n    );\n  }\n\n  render_field_name() {\n    if(this.props.is_authenticated && !this.props.request_name)\n      return \"\";\n    let div_cssc = \"form-group row\",\n        label_cssc = \"col-form-label col-md-3 text-right\",\n        input_cssc = \"form-control\",\n        help = \"\";\n    const placeholder = django.gettext('name');\n    if (this.state.reply_to > 0) {\n      label_cssc += \" form-control-sm\";\n      input_cssc += \" form-control-sm\";\n    }\n    if (this.state.errors.name) {\n      div_cssc += \" has-danger\";\n      input_cssc += \" is-invalid\";\n      help = this.fhelp;\n    }\n    return (\n      <div className={div_cssc}>\n        <label htmlFor=\"id_name\" className={label_cssc}>\n          {django.gettext(\"Name\")}\n        </label>\n        <div className=\"col-md-7\">\n          <input type=\"text\" name=\"name\" required id=\"id_name\"\n                 value={this.state.name} placeholder={placeholder}\n                 onChange={this.handle_input_change}\n                 onBlur={this.handle_blur('name')}\n                 className={input_cssc} />\n          {help}\n        </div>\n      </div>\n    );\n  }\n\n  render_field_email() {\n    if(this.props.is_authenticated && !this.props.request_email_address)\n      return \"\";\n    let div_cssc = \"form-group row\",\n        label_cssc = \"col-form-label col-md-3 text-right\",\n        input_cssc = \"form-control\",\n        help_cssc = \"form-text small\",\n        helptext_style = {};\n    const placeholder = django.gettext('mail address'),\n          helptext = django.gettext('Required for comment verification.');\n    if (this.state.reply_to > 0) {\n      label_cssc += \" form-control-sm\";\n      input_cssc += \" form-control-sm\";\n      helptext_style = {fontSize: \"0.710rem\"};\n    }\n    if (this.state.errors.email) {\n      div_cssc += \" has-danger\";\n      input_cssc += \" is-invalid\";\n      help_cssc += \" invalid-feedback\";\n    }\n    return (\n      <div className={div_cssc}>\n        <label htmlFor=\"id_email\" className={label_cssc}>\n          {django.gettext(\"Mail\")}\n        </label>\n        <div className=\"col-md-7\">\n          <input type=\"text\" name=\"email\" required id=\"id_email\"\n                 value={this.state.email} placeholder={placeholder}\n                 onChange={this.handle_input_change}\n                 onBlur={this.handle_blur('email')}\n                 className={input_cssc} />\n          <span className={help_cssc}\n                style={helptext_style}>{helptext}</span>\n        </div>\n      </div>\n    );\n  }\n\n  render_field_url() {\n    if(this.props.is_authenticated)\n      return \"\";\n    let label_cssc = \"col-form-label col-md-3 text-right\",\n        input_cssc = \"form-control\";\n    if(this.state.reply_to > 0) {\n      label_cssc += \" form-control-sm\";\n      input_cssc += \" form-control-sm\";\n    }\n    if(this.state.errors.url)\n    var placeholder = django.gettext(\"url your name links to (optional)\");\n    return (\n      <div className=\"form-group row\">\n        <label htmlFor=\"id_url\" className={label_cssc}>\n          {django.gettext(\"Link\")}\n        </label>\n        <div className=\"col-md-7\">\n          <input type=\"text\" name=\"url\" id=\"id_url\"\n                 value={this.state.url}\n                 placeholder={placeholder}\n                 onChange={this.handle_input_change}\n                 className={input_cssc} />\n        </div>\n      </div>\n    );\n  }\n\n  render_field_followup() {\n    let label = django.gettext(\"Notify me about follow-up comments\"),\n        label_cssc = \"custom-control-label\",\n        elem_id = \"id_followup\";\n    if(this.state.reply_to > 0) {\n        label_cssc += \" small\";\n        elem_id += `_${this.state.reply_to}`;\n    }\n    return (\n      <div className=\"form-group row\">\n        <div className=\"offset-md-3 col-md-7\">\n          <div className=\"custom-control custom-checkbox\">\n            <input className=\"custom-control-input\" type=\"checkbox\"\n                   checked={this.state.followup}\n                   onChange={this.handle_input_change}\n                   name=\"followup\" id={elem_id} />\n            <label className={label_cssc} htmlFor={elem_id}>\n              &nbsp;{label}\n            </label>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  reset_form() {\n    this.setState({\n      name: '', email: '', url: '', followup: false, comment: '',\n      visited: {name: false, email: false, comment: false},\n      errors: {name: false, email: false, comment: false}\n    });\n  }\n\n  handle_submit_response(status) {\n    let css_class = \"\";\n    const msg_202 = django.gettext(\"Your comment will be reviewed. Thank your for your patience.\"),\n\t      msg_204 = django.gettext(\"Thank you, a comment confirmation request has been sent by mail.\"),\n\t      msg_403 = django.gettext(\"Sorry, your comment has been rejected.\");\n\n    const message = {202: msg_202,\n\t\t             204: msg_204,\n\t\t             403: msg_403},\n\t      cssc = \"alert alert-\";\n\n    if(status == 403)\n      css_class = cssc + \"danger\";\n    else css_class = cssc + \"info\";\n\n    this.setState({alert: {message: message[status], cssc: css_class},\n                   previewing: false});\n    this.reset_form();\n    this.props.on_comment_created();\n  }\n  \n  handle_submit(event) {\n    event.preventDefault();\n    if(!this.validate())\n      return;\n\n    const data = {\n      content_type: this.props.form.content_type,\n      object_pk: this.props.form.object_pk,\n      timestamp: this.props.form.timestamp,\n      security_hash: this.props.form.security_hash,\n      honeypot: '',\n      comment: this.state.comment,\n      name: this.state.name,\n      email: this.state.email,\n      url: this.state.url,\n      followup: this.state.followup,\n      reply_to: this.state.reply_to\n    };\n    \n    $.ajax({\n      method: 'POST',\n      url: this.props.send_url,\n      data: data,\n      dataType: 'json',\n      cache: false,\n      success: function(data, textStatus, xhr) {\n        if([201, 202, 204].indexOf(xhr.status) > -1) {\n\t      this.handle_submit_response(xhr.status);\n        }\n      }.bind(this),\n      error: function(xhr, status, err) {\n\t    if(xhr.status == 400) {\n\t      let errors = this.state.errors;\n\t      xhr.responseJSON.forEach(function(item, idx, array) {\n\t        errors[item] = true;\n\t      });\n\t      this.setState({errors: errors});\n\t    } else if (xhr.status == 403) {\n\t      this.handle_submit_response(xhr.status);\n\t    } else {\n          console.error(this.props.send_url, status, err.toString());\n\t    }\n      }.bind(this)\n    });\n  }\n  \n  handle_preview(event) {\n    event.preventDefault();\n    if(this.validate())\n      this.setState({previewing: true});\n  }\n\n  rawMarkup() {\n    var md = new Remarkable();\n    const rawMarkup = md.render(this.state.comment);\n    return { __html: rawMarkup };\n  }\n  \n  render_preview() {\n    if(!this.state.previewing)\n      return \"\";\n    let heading_name = \"\";\n\n    // Build Gravatar.\n    const hash = md5(this.state.email.toLowerCase());\n    const avatar_url = \"//www.gravatar.com/avatar/\"+hash+\"?s=48&d=mm\";\n    const avatar_img = <img className=\"mr-3\" src={avatar_url}\n                            height=\"48\" width=\"48\"/>;\n    \n    if(this.state.url) {\n      heading_name = (<a href={this.state.url} target=\"_new\">\n                      {this.state.name}</a>);\n    } else {\n      if(this.props.is_authenticated)\n        heading_name = this.props.current_user.split(\":\")[1];\n      else heading_name = this.state.name;\n    }\n\n    let label = \"\";\n    var header_text = django.gettext(\"Your comment in preview\");\n    let header = <h5 className=\"text-center\">{header_text}</h5>;\n    if(this.state.reply_to > 0) {\n      header = \"\";\n      label = <div className=\"badge badge-info\">preview</div>;\n    }\n    var nowtext = django.gettext(\"Now\");\n    return (\n      <div>\n        <hr/>\n        {header}\n        <div className=\"media\">\n          {avatar_img}\n          <div className=\"media-body\">\n            <div className=\"comment pb-3\">\n              <h6 className=\"mb-1 small\">\n                {nowtext}&nbsp;-&nbsp;{heading_name}&nbsp;&nbsp;{label}\n              </h6>\n              <div className=\"preview\"\n                   dangerouslySetInnerHTML={this.rawMarkup()} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render_form() {\n    let comment = this.render_field_comment();\n    let name = this.render_field_name();\n    let mail = this.render_field_email();\n    let url = this.render_field_url();\n    let followup = this.render_field_followup();\n    let btns_row_class = \"form-group row\";\n    let btn_submit_class = \"btn btn-primary\",\n        btn_preview_class = \"btn btn-secondary\";\n    if(this.state.reply_to != 0) {\n      btns_row_class += \" mb-0\";\n      btn_submit_class += \" btn-sm\";\n      btn_preview_class += \" btn-sm\";\n    }\n    var btn_label_preview = django.gettext(\"preview\");\n    var btn_label_send = django.gettext(\"send\");\n    \n    return (\n      <form method=\"POST\" onSubmit={this.handle_submit}>\n        <input type=\"hidden\" name=\"content_type\"\n               defaultValue={this.props.form.content_type}/>\n        <input type=\"hidden\" name=\"object_pk\"\n               defaultValue={this.props.form.object_pk}/>\n        <input type=\"hidden\" name=\"timestamp\"\n               defaultValue={this.props.form.timestamp}/>\n        <input type=\"hidden\" name=\"security_hash\"\n               defaultValue={this.props.form.security_hash}/>\n        <input type=\"hidden\" name=\"reply_to\"\n               defaultValue={this.state.reply_to}/>\n        <fieldset>\n          <div style={{display:'none'}}>\n            <input type=\"text\" name=\"honeypot\" defaultValue=\"\"/>\n          </div>\n          {comment} {name} {mail} {url} {followup}\n        </fieldset>\n        \n        <div className={btns_row_class}>\n          <div className=\"offset-md-3 col-md-7\">\n            <button type=\"submit\" name=\"post\"\n                    className={btn_submit_class}>{btn_label_send}</button>&nbsp;\n            <button name=\"preview\" className={btn_preview_class}\n                   onClick={this.handle_preview}>{btn_label_preview}</button>\n          </div>\n        </div>\n      </form>\n    );\n  }\n  \n  render() {\n    let preview = this.render_preview();\n    let header = \"\";\n    let div_class = \"card card-block mt-2\";\n    var label = django.gettext(\"Post your comment\");\n    if(this.state.reply_to == 0) {\n      header = <h4 className=\"card-title text-center pb-3\">{label}</h4>;\n      div_class = \"card card-block mt-4 mb-5\";\n    }\n    let alert_div = \"\";\n    if(this.state.alert.message) {\n      alert_div = (\n        <div className={this.state.alert.cssc}>\n          {this.state.alert.message}\n        </div>\n      );\n    }\n    let form = this.render_form();\n\n    return (<div>\n              {preview}\n              <div className={div_class}>\n                <div className=\"card-body\">\n                  {header}\n                  {alert_div}\n                  {form}\n                </div>\n              </div>\n            </div>);\n  }\n}\n","import $ from 'jquery';\nimport django from 'django';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Remarkable } from 'remarkable';\n\nimport { CommentForm } from './commentform.jsx';\n\n\nfunction reduce_flags(data, current_user) {\n  const flags = {\n    like: { active: false, users: [] },\n    dislike: { active: false, users: [] },\n    removal: { active: false, count: 0 }\n  }\n  for (const item of data) {\n    const user = [item.id, item.user].join(\":\");\n    const active = user === current_user ? true : false;\n    if (item.flag === \"like\") {\n      flags.like.users.push(user);\n      if (active)\n        flags.like.active = active;\n    } else if (item.flag === \"dislike\") {\n      flags.dislike.users.push(user);\n      if (active)\n        flags.dislike.active = active;\n    } else if (item.flag === \"removal\") {\n      flags.removal.count += 1;\n      if (active)\n        flags.removal.active = active;\n    }\n  }\n  return flags;\n}\n\n\nexport class Comment extends React.Component {\n  constructor(props) {\n    super(props);\n    const flags = reduce_flags(props.data.flags, props.settings.current_user);\n    this.state = {\n      current_user: props.settings.current_user,\n      removal: flags.removal.active,\n      removal_count: flags.removal.count,\n      like: flags.like.active,\n      like_users: flags.like.users || [],\n      dislike: flags.dislike.active,\n      dislike_users: flags.dislike.users || [],\n      reply_form: {\n        component: null,\n        is_visible: false\n      }\n    };\n    this.action_like = this.action_like.bind(this);\n    this.action_dislike = this.action_dislike.bind(this);\n    this.handle_reply_click = this.handle_reply_click.bind(this);\n  }\n\n  _get_username_chunk() {\n    let username = this.props.data.user_name, moderator = \"\";\n\n    if(this.props.data.user_url && !this.props.data.is_removed)\n      username = <a href={this.props.data.user_url}>{username}</a>;\n\n    if(this.props.data.user_moderator) {\n      var label = django.gettext(\"moderator\");\n      moderator = (\n        <span>&nbsp;\n        <span className=\"badge badge-secondary\">{label}</span>\n        </span>\n      );\n    }\n    return <span>{username}{moderator}</span>;\n  }\n\n  _get_right_div_chunk() {\n    let flagging_count = \"\",\n        flagging_html = \"\",\n        moderate_html = \"\",\n        url = \"\";\n\n    if(this.props.data.is_removed)\n      return \"\";\n\n    if(this.props.settings.is_authenticated &&\n       this.props.settings.can_moderate &&\n       this.state.removal_count > 0)\n      {\n        let fmts = django.ngettext(\n          \"%s user has flagged this comment as inappropriate.\",\n          \"%s users have flagged this comment as inappropriate.\",\n          this.state.removal_count);\n        let text = django.interpolate(fmts, [this.state.removal_count]);\n        flagging_count = (<span className=\"badge badge-danger\" title={text}>\n          {this.state.removal_count}</span>);\n      }\n\n    if (this.props.settings.allow_flagging)\n      {\n        let inapp_msg = \"\";\n        if(this.state.removal) {\n          inapp_msg = django.gettext(\"I flagged it as inappropriate\");\n          flagging_html = (\n            <span>\n              {flagging_count}\n              <i className=\"fas fa-flag text-danger\" title={inapp_msg}></i>\n            </span>\n          );\n        } else {\n          if (this.props.settings.is_authenticated) {\n            url = this.props.settings.flag_url.replace('0', this.props.data.id);\n          } else {\n            url = (this.props.settings.login_url + \"?next=\" +\n                   this.props.settings.flag_url.replace('0', this.props.data.id));\n          }\n          inapp_msg = django.gettext(\"flag comment as inappropriate\");\n          flagging_html = (\n            <a className=\"mutedlink\" href={url}>\n              <i className=\"fas fa-flag\" title={inapp_msg}></i></a>\n          );\n        }\n      }\n\n    if(this.props.settings.is_authenticated &&\n       this.props.settings.can_moderate)\n      {\n        let remove_msg = django.gettext(\"remove comment\");\n        url = this.props.settings.delete_url.replace('0', this.props.data.id);\n        moderate_html = (<a className=\"mutedlink\" href={url}>\n          <i className=\"fas fa-trash-alt\" title={remove_msg}></i>\n        </a>);\n      }\n\n    return (<div>{flagging_html} {moderate_html}</div>);\n  }\n\n  _get_feedback_chunk(dir) {\n    if(!this.props.settings.allow_feedback)\n      return \"\";\n    let attr_list = dir + \"_users\";  // Produce (dis)like_users\n    let show_users_chunk = \"\";\n\n    if(this.props.settings.show_feedback) {\n      /* Check whether the user is no longer liking/disliking the comment,\n       * and be sure the list of users who liked/disliked the comment\n       * is up-to-date likewise.\n       */\n      let current_user_id = this.state.current_user.split(\":\")[0];\n      let user_ids = this.state[attr_list].map(function(item) {\n        return item.split(\":\")[0];\n      });\n      if(this.state[dir] &&            // If user expressed opinion, and\n         (user_ids.indexOf(current_user_id) == -1)) // user not included.\n        {                                       // Append user to the list.\n          this.state[attr_list].push(this.state.current_user);\n        } else if(!this.state[dir] &&     // If user has no opinion, and\n                  (user_ids.indexOf(current_user_id) > -1)) // user included.\n          {                                   // Remove the user from the list.\n            var pos = user_ids.indexOf(current_user_id);\n            this.state[attr_list].splice(pos, 1);\n          }\n\n      if(this.state[attr_list].length) {\n        let users = this.state[attr_list].map(function(item) {\n          return item.split(\":\")[1];\n        });\n        users = users.join(\"<br/>\");\n        show_users_chunk = (\n          <span>&nbsp;<a className=\"badge badge-primary text-white cfb-counter\"\n                         data-toggle=\"tooltip\" title={users}>\n            {this.state[attr_list].length}\n          </a></span>\n        );\n      }\n    }\n\n    let css_class = this.state[dir] ? '' : 'mutedlink';\n    let icon = dir == 'like' ? 'thumbs-up' : 'thumbs-down';\n    let class_icon = \"fas fa-\"+icon;\n    let click_hdl = dir == 'like' ? this.action_like : this.action_dislike;\n    let opinion=\"\", link=\"#\";\n    if (dir == 'like')\n      opinion = django.gettext('I like it');\n    else opinion = django.gettext('I dislike it');\n\n    return (\n      <span>{show_users_chunk}&nbsp;<a href=\"#\" onClick={click_hdl}\n                                       className={css_class}>\n        <i className={class_icon} title={opinion}>\n        </i></a>&nbsp;</span>);\n  }\n\n  render_feedback_btns() {\n    const {\n      allow_feedback, who_can_post, is_authenticated\n    } = this.props.settings;\n    \n    if(\n      (allow_feedback && who_can_post === 'all') ||\n      (allow_feedback && who_can_post === 'users' && is_authenticated)\n    )\n    {\n      let feedback_id = \"feedback-\"+this.props.data.id;\n      if(this.props.settings.show_feedback)\n        this.disposeTooltips(feedback_id);\n      let like_feedback = this._get_feedback_chunk(\"like\");\n      let dislike_feedback = this._get_feedback_chunk(\"dislike\");\n      return (<span id={feedback_id} className=\"small\">{like_feedback}\n                <span className=\"text-muted\">|</span>{dislike_feedback}</span>);\n    } else\n      return null;\n  }\n\n  make_form_invisible(submit_status) {\n    this.props.on_comment_created();\n  }\n  \n  handle_reply_click(event) {\n    event.preventDefault();\n    let component = this.state.reply_form.component;\n    let visible = !this.state.reply_form.is_visible;\n    if(component == null)\n      component = (\n        <CommentForm {...this.props.settings}\n                     reply_to={this.props.data.id}\n                     on_comment_created={this.make_form_invisible.bind(this)} />\n      );\n    this.setState({reply_form: {component: component, is_visible: visible}});\n  }\n\n  _get_reply_link_chunk() {\n    const { is_authenticated, who_can_post } = this.props.settings;\n    if (!is_authenticated && who_can_post === 'users')\n      return null;\n    let url = this.props.settings.reply_url.replace('0', this.props.data.id),\n        reply_label = django.gettext(\"Reply\");\n    \n    if(this.props.settings.allow_feedback) {\n      return (\n        <span>&nbsp;&nbsp;<span className=\"text-muted\">&bull;</span>&nbsp;&nbsp;\n          <a className=\"small mutedlink\" href={url}\n             onClick={this.handle_reply_click}>{reply_label}</a>\n        </span>\n      );\n    } else {\n      return (<a className=\"small mutedlink\" href={url}\n              onClick={this.handle_reply_click}>{reply_label}</a>);\n    }\n  }\n\n  rawMarkup() {\n    var md = new Remarkable();\n    const rawMarkup = md.render(this.props.data.comment);\n    return { __html: rawMarkup };\n  }\n  \n  render_comment_body() {\n    const extra_space = (!this.props.settings.allow_feedback) ? \"pb-3\" : \"\";\n    if(this.props.data.is_removed) {\n      let cls = `text-muted ${extra_space}`;\n      return (\n        <p className={cls}><em>{this.props.data.comment}</em></p>\n      );\n    } else {\n      let cls = `content ${extra_space}`;\n      return (\n        <div className={cls} dangerouslySetInnerHTML={this.rawMarkup()}/>\n      );\n    }\n  }\n\n  render_reply_form() {\n    if(!this.state.reply_form.is_visible)\n      return \"\";\n    return (\n      <div>{this.state.reply_form.component}</div>\n    );\n  }\n  \n  _post_feedback(flag) {\n    $.ajax({\n      method: 'POST',\n      url: this.props.settings.feedback_url,\n      data: {comment: this.props.data.id, flag: flag},\n      dataType: 'json',\n      cache: false,\n      statusCode: {\n        201: function() {\n          let state = {};\n          if(flag=='like')\n            this.setState({like: true, dislike: false});\n          else if(flag=='dislike')\n            this.setState({dislike: true, like: false});\n        }.bind(this),\n        204: function() {\n          if(flag=='like')\n            this.setState({like: false});\n          else if(flag=='dislike')\n            this.setState({dislike: false});\n        }.bind(this)\n      },\n      error: function(xhr, status, err) {\n        if(xhr.status==400 && xhr.responseJSON.non_field_errors.length)\n          alert(xhr.responseJSON.non_field_errors[0]);\n        else\n          console.error(this.props.settings.feedback_url, status,\n                        err.toString());\n      }.bind(this)\n    });\n  }\n\n  action_like(event) {\n    event.preventDefault();\n    if(this.props.settings.is_authenticated)\n      return this._post_feedback('like');\n    else\n      return window.location.href = (\n        this.props.settings.login_url + \"?next=\" +\n        this.props.settings.like_url.replace('0', this.props.data.id)\n      );\n  }\n\n  action_dislike(event) {\n    event.preventDefault();\n    if(this.props.settings.is_authenticated)\n      return this._post_feedback('dislike');\n    else\n      return window.location.href = (\n        this.props.settings.login_url + \"?next=\" +\n        this.props.settings.dislike_url.replace('0', this.props.data.id)\n      );\n  }\n\n  is_hover(elem) {\n    return (elem.parentElement.querySelector(':hover') === elem);\n  }\n\n  disposeTooltips(feedback_id) {\n    // console.log(\"feedback_id = \"+feedback_id);\n    var elem = document.getElementById(feedback_id);\n    var is_hover = elem && this.is_hover(elem);\n    if(elem && !is_hover) {\n      $('#'+feedback_id+' A[data-toggle=\"tooltip\"]').tooltip('dispose');\n    }\n  }\n  \n  componentDidMount() {\n    var feedback_id = \"feedback-\" + this.props.data.id;\n    var options = {html: true, selector: '.cfb-counter'};\n    $('#'+feedback_id).tooltip(options);\n  }\n\n  componentDidUpdate() {\n    var feedback_id = \"feedback-\" + this.props.data.id;\n    var options = {html: true, selector: '.cfb-counter'};\n    $('#'+feedback_id).tooltip(options);\n  }\n  \n  componentWillUnmount() {\n    var feedback_id = \"feedback-\" + this.props.data.id;\n    var elem = document.getElementById(feedback_id);\n    var is_hover = elem && this.is_hover(elem);\n    if(elem && !is_hover) {\n      $('#'+feedback_id+' A[data-toggle=\"tooltip\"]').tooltip('dispose');\n    }\n  }\n  \n  render() {\n    let comment_id = \"c\" + this.props.data.id;\n    let user_name = this._get_username_chunk();  // Plain name or link.\n    let right_div = this._get_right_div_chunk();  // Flagging & moderation.\n    let comment_body = this.render_comment_body();\n    let feedback_btns = \"\",\n        reply_link = \"\",\n        reply_form = \"\";\n    if (!this.props.data.is_removed) {\n      feedback_btns = this.render_feedback_btns();\n      reply_link = this._get_reply_link_chunk();\n      reply_form = this.render_reply_form();\n    }\n\n    var new_label = \"\";\n    if (this.props.newcids.indexOf(this.props.data.id) > -1) {\n      new_label = (\n        <span>\n          <span className=\"badge badge-success\">new</span>&nbsp;-&nbsp;\n        </span>\n      );\n    }\n    \n    var children = \"\";\n    var settings = this.props.settings;\n    if (this.props.data.children != null) {\n      children = this.props.data.children.map(function(item) {\n        return (\n          <Comment key={item.id}\n                   data={item}\n                   settings={settings}\n                   newcids={this.props.newcids}\n                   on_comment_created={this.props.on_comment_created} />\n        );\n      }.bind(this));\n    }\n\n    return (\n      <div className=\"media\" id={comment_id}>\n        <img src={this.props.data.user_avatar}\n             className=\"mr-3\" height=\"48\" width=\"48\" />\n        <div className=\"media-body\">\n          <div className=\"comment pb-3\">\n            <a name={comment_id}></a>\n            <h6 className=\"mb-1 small d-flex\">\n              <div className=\"mr-auto\">\n                {new_label}{this.props.data.submit_date}&nbsp;-&nbsp;{user_name}\n                &nbsp;&nbsp;\n                <a className=\"permalink\" href={this.props.data.permalink}></a>\n              </div>\n              {right_div}\n            </h6>\n            {comment_body}{feedback_btns}{reply_link}\n            {reply_form}\n          </div>\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n","import $ from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as lib from './lib.js';\nimport django from 'django';\n\nimport { Comment } from './comment.jsx';\nimport { CommentForm } from './commentform.jsx';\n\n\nexport class CommentBox extends React.Component {\n  constructor(props) {\n    super(props);\n    lib.jquery_ajax_setup('csrftoken');\n    this.state = {\n      previewing: false,\n      preview: {name: '', email: '', url: '', comment: ''},\n      tree: [], cids: [], newcids: [], counter: this.props.comment_count\n    };\n    this.handle_comment_created = this.handle_comment_created.bind(this);\n    this.handle_preview = this.handle_preview.bind(this);\n    this.handle_update = this.handle_update.bind(this);\n  }\n\n  handle_comment_created() {\n    this.load_comments();\n  }\n  \n  handle_preview(name, email, url, comment) {\n    this.setState({\n      preview: {name: name, email: email, url: url, comment: comment},\n      previewing: true\n    });\n  }\n\n  handle_update(event) {\n    event.preventDefault();\n    this.load_comments();\n  }\n\n  reset_preview() {\n    this.setState({\n      preview: {name: '', email: '', url: '', comment: ''},\n      previewing: false\n    });\n  }\n\n  render_comment_counter() {\n    if (this.state.counter > 0) {\n      var fmts = django.ngettext(\"%s comment.\", \"%s comments.\",\n                                 this.state.cids.length);\n      var text = django.interpolate(fmts, [this.state.cids.length]);\n      return <h5 className=\"text-center\">{text}</h5>;\n    } else\n      return \"\";\n  }\n\n  render_comment_form() {\n    const {\n      allow_comments, who_can_post, is_authenticated, html_id_suffix\n    } = this.props;\n    if(allow_comments) {\n      if (\n        who_can_post === 'all' ||\n        (who_can_post === 'users' && is_authenticated)\n      ) {\n        return (\n          <CommentForm {...this.props}\n                       on_comment_created={this.handle_comment_created} />\n        );\n      } else {\n        const _id = `only-users-can-post-${html_id_suffix}`;\n        const elem = document.getElementById(_id);\n        if (elem != undefined)\n          return <div dangerouslySetInnerHTML={{__html: elem.innerHTML}} />;\n        else\n          return (\n            <h5 className=\"mt-4 mb-5 text-center text-info\">\n              Only registered users can post comments.\n           </h5>\n          );\n      }\n    } else {\n      return (\n        <h4 className=\"mt-4 mb-5 text-center text-secondary\">\n          Comments are disabled for this article.\n        </h4>\n      );\n    }\n  }\n\n  render_update_alert() {\n    var diff = this.state.counter - this.state.cids.length;\n    if (diff > 0) {\n      var fmts = django.ngettext(\"There is %s new comment.\",\n                                 \"There are %s new comments.\", diff);\n      var message = django.interpolate(fmts, [diff]);\n      return (\n        <div className=\"alert alert-info d-flex align-items-center\">\n          <p className=\"mr-auto\">{message}</p>\n          <button type=\"button\" className=\"btn btn-secondary btn-xs\"\n                  onClick={this.handle_update}>update</button>\n        </div>\n      );\n    } else\n      return \"\";\n  }\n\n  create_tree(data) {\n    var tree = new Array();\n    var order = new Array();\n    var comments = {};\n    var children = {};\n    var incids = [], curcids = [], newcids = [];\n\n    function get_children(cid) {\n      return children[cid].map(function(index) {\n        if(comments[index].children == undefined) {\n          comments[index].children = get_children(index);\n        }\n        return comments[index];\n      });\n    };\n    \n    for (let item of data) {\n      incids.push(item.id);\n      comments[item.id] = item;\n      if (item.level == 0) {\n        order.push(item.id);\n      }\n      children[item.id] = [];\n      if (item.parent_id!==item.id) {\n        children[item.parent_id].push(item.id);\n      }\n    }\n    for (let id of order) {\n      comments[id].children = get_children(id);\n      tree.push(comments[id]);\n    }\n\n    // Update attributes curcids and newcids.\n    if (incids.length) {\n      if (this.state.cids.length) {\n        for (let id of incids) {\n          if (this.state.cids.indexOf(id) == -1)\n            newcids.push(id);\n          curcids.push(id);\n        }\n      } else {\n        curcids = incids;\n        newcids = [];\n      }\n    }\n\n    this.setState({tree: tree,\n                   cids: curcids,\n                   newcids: newcids,\n                   counter: curcids.length});\n  }\n\n  load_comments() {\n    $.ajax({\n      url: this.props.list_url,\n      dataType: 'json',\n      cache: false,\n      success: function(data) {\n        // Set here a cookie with the last time comments have been retrieved.\n        // I'll use it to add a label 'new' to every new comment received\n        // after the timestamp stored in the cookie.\n        this.create_tree(data);\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.list_url, status, err.toString());\n      }.bind(this)\n    });\n  }\n\n  load_count() {\n    $.ajax({\n      url: this.props.count_url,\n      dataType: 'json',\n      cache: false,\n      success: function(data) {\n        this.setState({counter: data.count});\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.count_url, status, err.toString());\n      }.bind(this)\n    });\n  }\n  \n  componentDidMount() {\n    this.load_comments();\n    if(this.props.polling_interval)\n      setInterval(this.load_count.bind(this), this.props.polling_interval);\n  }\n  \n  render() {\n    var settings = this.props;\n    var comment_counter = this.render_comment_counter();\n    var update_alert = this.render_update_alert();\n    var comment_form = this.render_comment_form();\n\n    var nodes = this.state.tree.map(function(item) {\n      return (\n        <Comment key={item.id}\n                 data={item}\n                 settings={settings}\n                 newcids={this.state.newcids}\n                 on_comment_created={this.handle_comment_created} />\n      );\n    }.bind(this));\n    \n    return (\n      <div>\n        {comment_counter}\n        {comment_form}\n        {update_alert}\n        <div className=\"comment-tree\">\n          <div className=\"media-list\">\n            {nodes}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { CommentBox } from './commentbox.jsx';\n\n\nReactDOM.render(\n  React.createElement(CommentBox,\n                      Object.assign(window.comments_props,\n                                    window.comments_props_override)),\n  document.getElementById('comments')\n);\n"],"sourceRoot":""}