{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"django\"","webpack:///external \"jQuery\"","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/lib.js","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/commentform.jsx","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/comment.jsx","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/commentbox.jsx","webpack:///./django_comments_xtd/static/django_comments_xtd/js/src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","django","jQuery","jquery_ajax_setup","csrf_cookie_name","$","ajaxSetup","beforeSend","xhr","settings","method","type","test","this","crossDomain","setRequestHeader","cookieValue","document","cookie","cookies","split","trim","substring","decodeURIComponent","getCookie","CommentForm","_React$Component","props","_this","_classCallCheck","_getPrototypeOf","state","email","url","followup","comment","reply_to","visited","errors","previewing","alert","message","cssc","handle_input_change","_assertThisInitialized","handle_blur","handle_submit","handle_preview","reset_form","fhelp","react_default","a","createElement","className","gettext","_inherits","React","Component","event","target","checked","iname","setState","_defineProperty","field","is_authenticated","request_name","request_email_address","div_cssc","input_cssc","help","placeholder","required","id","maxLength","onChange","onBlur","label_cssc","htmlFor","help_cssc","helptext_style","helptext","fontSize","style","label","status","css_class","202","204","403","on_comment_created","preventDefault","validate","content_type","form","object_pk","timestamp","security_hash","honeypot","ajax","send_url","dataType","cache","success","textStatus","indexOf","handle_submit_response","error","err","responseJSON","forEach","item","idx","array","console","toString","rawMarkup","Remarkable","render","__html","heading_name","avatar_url","md5","toLowerCase","avatar_img","src","height","width","href","current_user","header_text","header","nowtext","dangerouslySetInnerHTML","render_field_comment","render_field_name","mail","render_field_email","render_field_url","render_field_followup","btns_row_class","btn_submit_class","btn_preview_class","btn_label_preview","btn_label_send","onSubmit","defaultValue","display","onClick","preview","render_preview","div_class","alert_div","render_form","Comment","comment_classCallCheck","comment_getPrototypeOf","removal","flags","active","removal_count","count","like","like_users","users","dislike","dislike_users","reply_form","component","is_visible","action_like","comment_assertThisInitialized","action_dislike","handle_reply_click","log","comment_inherits","username","user_name","moderator","user_url","is_removed","user_moderator","flagging_count","flagging_html","moderate_html","can_moderate","fmts","ngettext","text","interpolate","title","allow_flagging","inapp_msg","flag_url","replace","login_url","remove_msg","delete_url","dir","allow_feedback","attr_list","show_users_chunk","show_feedback","current_user_id","user_ids","map","pos","join","data-toggle","class_icon","click_hdl","opinion","feedback_id","disposeTooltips","like_feedback","_get_feedback_chunk","dislike_feedback","submit_status","visible","commentform_CommentForm","_extends","make_form_invisible","allow_reply","reply_url","reply_label","extra_space","cls","concat","flag","feedback_url","statusCode","201","non_field_errors","_post_feedback","location","like_url","dislike_url","elem","parentElement","querySelector","getElementById","is_hover","tooltip","html","selector","comment_id","_get_username_chunk","right_div","_get_right_div_chunk","comment_body","render_comment_body","feedback_btns","reply_link","render_feedback_btns","_get_reply_link_chunk","render_reply_form","new_label","newcids","children","user_avatar","submit_date","permalink","CommentBox","commentbox_classCallCheck","commentbox_getPrototypeOf","lib","tree","cids","counter","comment_count","handle_comment_created","commentbox_assertThisInitialized","handle_update","commentbox_inherits","load_comments","allow_comments","commentbox_extends","diff","Array","order","comments","incids","curcids","get_children","cid","index","undefined","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","level","parent_id","return","_i","_i2","list_url","create_tree","count_url","polling_interval","setInterval","load_count","comment_counter","render_comment_counter","update_alert","render_update_alert","comment_form","render_comment_form","nodes","comment_Comment","ReactDOM","assign","comments_props","comments_props_override"],"mappings":"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","file":"plugin-2.3.1.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([75,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = django;","module.exports = jQuery;","import $ from 'jquery';\n\nexport function getCookie(name) {\n  var cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    var cookies = document.cookie.split(';');\n    for (var i = 0; i < cookies.length; i++) {\n      var cookie = jQuery.trim(cookies[i]);\n      // Does this cookie string begin with the name we want?\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\nexport function csrfSafeMethod(method) {\n  // these HTTP methods do not require CSRF protection\n  return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n}\n\nexport function jquery_ajax_setup(csrf_cookie_name) {\n  $.ajaxSetup({\n    beforeSend: function(xhr, settings) {\n      if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n        xhr.setRequestHeader(\"X-CSRFToken\", getCookie(csrf_cookie_name));\n      }\n    }\n  });\n}\n","import $ from 'jquery';\nimport django from 'django';\n\nimport md5 from 'md5';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Remarkable from 'remarkable';\n\nimport * as lib from './lib.js';\n\n\nexport class CommentForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '', email: '', url: '', followup: false, comment: '',\n      reply_to: this.props.reply_to || 0,\n      visited: {name: false, email: false, comment: false},\n      errors: {name: false, email: false, comment: false},\n      previewing: false,\n      alert: {message: '', cssc: ''}\n    };\n    this.handle_input_change = this.handle_input_change.bind(this);\n    this.handle_blur = this.handle_blur.bind(this);\n    this.handle_submit = this.handle_submit.bind(this);\n    this.handle_preview = this.handle_preview.bind(this);\n    this.reset_form = this.reset_form.bind(this);\n    this.fhelp = <span className=\"form-text small invalid-feedback\">\n                   {django.gettext(\"This field is required.\")}\n                 </span>;\n  }\n\n  handle_input_change(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const iname = target.name;\n\n    this.setState({[iname]: value});\n  }\n\n  handle_blur(field) {\n    function handler(event) {\n      var visited = this.state.visited;\n      visited[field] = true;\n      this.setState({visited: visited});\n    };\n    return handler.bind(this);\n  }\n\n  validate() {\n    var errors = this.state.errors;\n    errors.name = false;\n    errors.email = false;\n\n    if(!this.state.comment.length)\n      errors.comment = true;\n    else errors.comment = false;\n    if(!this.props.is_authenticated || this.props.request_name) {\n      if(/^\\s*$/.test(this.state.name))\n        errors.name = true;\n      else errors.name = false;\n    }\n    if(!this.props.is_authenticated || this.props.request_email_address) {\n      if(/\\S+@\\S+\\.\\S+/.test(this.state.email))\n        errors.email = false;\n      else errors.email = true;\n    }\n    this.setState({errors: errors});\n\n    if(this.state.errors.comment ||\n       this.state.errors.name ||\n       this.state.errors.email)\n      return false;\n    else return true;\n  }\n\n  render_field_comment() {\n    let div_cssc = \"form-group row\",\n        input_cssc = \"form-control\",\n        help = \"\";\n    if (this.state.reply_to > 0) {\n      input_cssc += \" form-control-sm\";\n    }\n    if (this.state.errors.comment) {\n      div_cssc += (this.state.errors.comment ? \" has-danger\" : \"\");\n      input_cssc += \" is-invalid\";\n      help = this.fhelp;\n    }\n    var placeholder = django.gettext(\"Your comment\");\n    return (\n      <div className={div_cssc}>\n        <div className=\"offset-md-1 col-md-10\">\n          <textarea required name=\"comment\" id=\"id_comment\"\n                    placeholder={placeholder} maxLength=\"3000\"\n                    className={input_cssc} value={this.state.comment}\n                    onChange={this.handle_input_change}\n                    onBlur={this.handle_blur('comment')} />\n          {help}\n        </div>\n      </div>\n    );\n  }\n\n  render_field_name() {\n    if(this.props.is_authenticated && !this.props.request_name)\n      return \"\";\n    let div_cssc = \"form-group row\",\n        label_cssc = \"col-form-label col-md-3 text-right\",\n        input_cssc = \"form-control\",\n        help = \"\";\n    const placeholder = django.gettext('name');\n    if (this.state.reply_to > 0) {\n      label_cssc += \" form-control-sm\";\n      input_cssc += \" form-control-sm\";\n    }\n    if (this.state.errors.name) {\n      div_cssc += \" has-danger\";\n      input_cssc += \" is-invalid\";\n      help = this.fhelp;\n    }\n    return (\n      <div className={div_cssc}>\n        <label htmlFor=\"id_name\" className={label_cssc}>\n          {django.gettext(\"Name\")}\n        </label>\n        <div className=\"col-md-7\">\n          <input type=\"text\" name=\"name\" required id=\"id_name\"\n                 value={this.state.name} placeholder={placeholder}\n                 onChange={this.handle_input_change}\n                 onBlur={this.handle_blur('name')}\n                 className={input_cssc} />\n          {help}\n        </div>\n      </div>\n    );\n  }\n\n  render_field_email() {\n    if(this.props.is_authenticated && !this.props.request_email_address)\n      return \"\";\n    let div_cssc = \"form-group row\",\n        label_cssc = \"col-form-label col-md-3 text-right\",\n        input_cssc = \"form-control\",\n        help_cssc = \"form-text small\",\n        helptext_style = {};\n    const placeholder = django.gettext('mail address'),\n          helptext = django.gettext('Required for comment verification.');\n    if (this.state.reply_to > 0) {\n      label_cssc += \" form-control-sm\";\n      input_cssc += \" form-control-sm\";\n      helptext_style = {fontSize: \"0.710rem\"};\n    }\n    if (this.state.errors.email) {\n      div_cssc += \" has-danger\";\n      input_cssc += \" is-invalid\";\n      help_cssc += \" invalid-feedback\";\n    }\n    return (\n      <div className={div_cssc}>\n        <label htmlFor=\"id_email\" className={label_cssc}>\n          {django.gettext(\"Mail\")}\n        </label>\n        <div className=\"col-md-7\">\n          <input type=\"text\" name=\"email\" required id=\"id_email\"\n                 value={this.state.email} placeholder={placeholder}\n                 onChange={this.handle_input_change}\n                 onBlur={this.handle_blur('email')}\n                 className={input_cssc} />\n          <span className={help_cssc}\n                style={helptext_style}>{helptext}</span>\n        </div>\n      </div>\n    );\n  }\n\n  render_field_url() {\n    if(this.props.is_authenticated)\n      return \"\";\n    let label_cssc = \"col-form-label col-md-3 text-right\",\n        input_cssc = \"form-control\";\n    if(this.state.reply_to > 0) {\n      label_cssc += \" form-control-sm\";\n      input_cssc += \" form-control-sm\";\n    }\n    if(this.state.errors.url)\n    var placeholder = django.gettext(\"url your name links to (optional)\");\n    return (\n      <div className=\"form-group row\">\n        <label htmlFor=\"id_url\" className={label_cssc}>\n          {django.gettext(\"Link\")}\n        </label>\n        <div className=\"col-md-7\">\n          <input type=\"text\" name=\"url\" id=\"id_url\"\n                 value={this.state.url}\n                 placeholder={placeholder}\n                 onChange={this.handle_input_change}\n                 className={input_cssc} />\n        </div>\n      </div>\n    );\n  }\n\n  render_field_followup() {\n    let label = django.gettext(\"Notify me about follow-up comments\"),\n        label_cssc = \"custom-control-label\";\n    if(this.state.reply_to > 0)\n      label_cssc += \" small\";\n    return (\n      <div className=\"form-group row\">\n        <div className=\"offset-md-3 col-md-7\">\n          <div className=\"custom-control custom-checkbox\">\n            <input className=\"custom-control-input\" type=\"checkbox\"\n                   checked={this.state.followup}\n                   onChange={this.handle_input_change}\n                   name=\"followup\" id=\"id_followup\" />\n            <label className={label_cssc} htmlFor=\"id_followup\">\n              &nbsp;{label}\n            </label>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  reset_form() {\n    this.setState({\n      name: '', email: '', url: '', followup: false, comment: '',\n      visited: {name: false, email: false, comment: false},\n      errors: {name: false, email: false, comment: false}\n    });\n  }\n\n  handle_submit_response(status) {\n    let css_class = \"\";\n    const msg_202 = django.gettext(\"Your comment will be reviewed. Thank your for your patience.\"),\n\t      msg_204 = django.gettext(\"Thank you, a comment confirmation request has been sent by mail.\"),\n\t      msg_403 = django.gettext(\"Sorry, your comment has been rejected.\");\n\n    const message = {202: msg_202,\n\t\t             204: msg_204,\n\t\t             403: msg_403},\n\t      cssc = \"alert alert-\";\n\n    if(status == 403)\n      css_class = cssc + \"danger\";\n    else css_class = cssc + \"info\";\n\n    this.setState({alert: {message: message[status], cssc: css_class},\n                   previewing: false});\n    this.reset_form();\n    this.props.on_comment_created();\n  }\n  \n  handle_submit(event) {\n    event.preventDefault();\n    if(!this.validate())\n      return;\n\n    const data = {\n      content_type: this.props.form.content_type,\n      object_pk: this.props.form.object_pk,\n      timestamp: this.props.form.timestamp,\n      security_hash: this.props.form.security_hash,\n      honeypot: '',\n      comment: this.state.comment,\n      name: this.state.name,\n      email: this.state.email,\n      url: this.state.url,\n      followup: this.state.followup,\n      reply_to: this.state.reply_to\n    };\n    \n    $.ajax({\n      method: 'POST',\n      url: this.props.send_url,\n      data: data,\n      dataType: 'json',\n      cache: false,\n      success: function(data, textStatus, xhr) {\n        if([201, 202, 204].indexOf(xhr.status) > -1) {\n\t      this.handle_submit_response(xhr.status);\n        }\n      }.bind(this),\n      error: function(xhr, status, err) {\n\t    if(xhr.status == 400) {\n\t      let errors = this.state.errors;\n\t      xhr.responseJSON.forEach(function(item, idx, array) {\n\t        errors[item] = true;\n\t      });\n\t      this.setState({errors: errors});\n\t    } else if (xhr.status == 403) {\n\t      this.handle_submit_response(xhr.status);\n\t    } else {\n          console.error(this.props.send_url, status, err.toString());\n\t    }\n      }.bind(this)\n    });\n  }\n  \n  handle_preview(event) {\n    event.preventDefault();\n    if(this.validate())\n      this.setState({previewing: true});\n  }\n\n  rawMarkup() {\n    var md = new Remarkable();\n    const rawMarkup = md.render(this.state.comment);\n    return { __html: rawMarkup };\n  }\n  \n  render_preview() {\n    if(!this.state.previewing)\n      return \"\";\n    let heading_name = \"\";\n\n    // Build Gravatar.\n    const hash = md5(this.state.email.toLowerCase());\n    const avatar_url = \"http://www.gravatar.com/avatar/\"+hash+\"?s=48&d=mm\";\n    const avatar_img = <img className=\"mr-3\" src={avatar_url}\n                            height=\"48\" width=\"48\"/>;\n    \n    if(this.state.url) {\n      heading_name = (<a href={this.state.url} target=\"_new\">\n                      {this.state.name}</a>);\n    } else {\n      if(this.props.is_authenticated)\n        heading_name = this.props.current_user.split(\":\")[1];\n      else heading_name = this.state.name;\n    }\n\n    let label = \"\";\n    var header_text = django.gettext(\"Your comment in preview\");\n    let header = <h5 className=\"text-center\">{header_text}</h5>;\n    if(this.state.reply_to > 0) {\n      header = \"\";\n      label = <div className=\"badge badge-info\">preview</div>;\n    }\n    var nowtext = django.gettext(\"Now\");\n    return (\n      <div>\n        <hr/>\n        {header}\n        <div className=\"media\">\n          {avatar_img}\n          <div className=\"media-body\">\n            <div className=\"comment pb-3\">\n              <h6 className=\"mb-1 small\">\n                {nowtext}&nbsp;-&nbsp;{heading_name}&nbsp;&nbsp;{label}\n              </h6>\n              <div className=\"preview\"\n                   dangerouslySetInnerHTML={this.rawMarkup()} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render_form() {\n    let comment = this.render_field_comment();\n    let name = this.render_field_name();\n    let mail = this.render_field_email();\n    let url = this.render_field_url();\n    let followup = this.render_field_followup();\n    let btns_row_class = \"form-group row\";\n    let btn_submit_class = \"btn btn-primary\",\n        btn_preview_class = \"btn btn-secondary\";\n    if(this.state.reply_to != 0) {\n      btns_row_class += \" mb-0\";\n      btn_submit_class += \" btn-sm\";\n      btn_preview_class += \" btn-sm\";\n    }\n    var btn_label_preview = django.gettext(\"preview\");\n    var btn_label_send = django.gettext(\"send\");\n    \n    return (\n      <form method=\"POST\" onSubmit={this.handle_submit}>\n        <input type=\"hidden\" name=\"content_type\"\n               defaultValue={this.props.form.content_type}/>\n        <input type=\"hidden\" name=\"object_pk\"\n               defaultValue={this.props.form.object_pk}/>\n        <input type=\"hidden\" name=\"timestamp\"\n               defaultValue={this.props.form.timestamp}/>\n        <input type=\"hidden\" name=\"security_hash\"\n               defaultValue={this.props.form.security_hash}/>\n        <input type=\"hidden\" name=\"reply_to\"\n               defaultValue={this.state.reply_to}/>\n        <fieldset>\n          <div style={{display:'none'}}>\n            <input type=\"text\" name=\"honeypot\" defaultValue=\"\"/>\n          </div>\n          {comment} {name} {mail} {url} {followup}\n        </fieldset>\n        \n        <div className={btns_row_class}>\n          <div className=\"offset-md-3 col-md-7\">\n            <button type=\"submit\" name=\"post\"\n                    className={btn_submit_class}>{btn_label_send}</button>&nbsp;\n            <button name=\"preview\" className={btn_preview_class}\n                   onClick={this.handle_preview}>{btn_label_preview}</button>\n          </div>\n        </div>\n      </form>\n    );\n  }\n  \n  render() {\n    let preview = this.render_preview();\n    let header = \"\";\n    let div_class = \"card card-block mt-2\";\n    var label = django.gettext(\"Post your comment\");\n    if(this.state.reply_to == 0) {\n      header = <h4 className=\"card-title text-center pb-3\">{label}</h4>;\n      div_class = \"card card-block mt-4 mb-5\";\n    }\n    let alert_div = \"\";\n    if(this.state.alert.message) {\n      alert_div = (\n        <div className={this.state.alert.cssc}>\n          {this.state.alert.message}\n        </div>\n      );\n    }\n    let form = this.render_form();\n\n    return (<div>\n              {preview}\n              <div className={div_class}>\n                <div className=\"card-body\">\n                  {header}\n                  {alert_div}\n                  {form}\n                </div>\n              </div>\n            </div>);\n  }\n}\n","import $ from 'jquery';\nimport django from 'django';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Remarkable from 'remarkable';\n\nimport {CommentForm} from './commentform.jsx';\n\n\nexport class Comment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current_user: props.settings.current_user,\n      removal: props.data.flags.removal.active,\n      removal_count: props.data.flags.removal.count,\n      like: props.data.flags.like.active,\n      like_users: props.data.flags.like.users || [],\n      dislike: props.data.flags.dislike.active,\n      dislike_users: props.data.flags.dislike.users || [],\n      reply_form: {\n        component: null,\n        is_visible: false\n      }\n    };\n    this.action_like = this.action_like.bind(this);\n    this.action_dislike = this.action_dislike.bind(this);\n    this.handle_reply_click = this.handle_reply_click.bind(this);\n    console.log(\"Creating Comment\");\n  }\n\n  _get_username_chunk() {\n    let username = this.props.data.user_name, moderator = \"\";\n\n    if(this.props.data.user_url && !this.props.data.is_removed)\n      username = <a href={this.props.data.user_url}>{username}</a>;\n\n    if(this.props.data.user_moderator) {\n      var label = django.gettext(\"moderator\");\n      moderator = (\n        <span>&nbsp;\n         <span className=\"badge badge-secondary\">{label}</span>\n        </span>\n         );\n    }\n    return <span>{username}{moderator}</span>;\n  }\n\n  _get_right_div_chunk() {\n      let flagging_count = \"\",\n          flagging_html = \"\",\n          moderate_html = \"\",\n          url = \"\";\n\n    if(this.props.data.is_removed)\n      return \"\";\n\n    if(this.props.settings.is_authenticated &&\n       this.props.settings.can_moderate &&\n       this.state.removal_count > 0)\n    {\n      let fmts = django.ngettext(\n        \"%s user has flagged this comment as inappropriate.\",\n        \"%s users have flagged this comment as inappropriate.\",\n        this.state.removal_count);\n      let text = django.interpolate(fmts, [this.state.removal_count]);\n      flagging_count = (<span className=\"badge badge-danger\" title={text}>\n                        {this.state.removal_count}</span>);\n    }\n\n    if (this.props.settings.allow_flagging)\n    {\n      let inapp_msg = \"\";\n      if(this.state.removal) {\n        inapp_msg = django.gettext(\"I flagged it as inappropriate\");\n        flagging_html = (\n          <span>\n            {flagging_count}\n            <i className=\"fas fa-flag text-danger\" title={inapp_msg}></i>\n          </span>\n        );\n      } else {\n        if (this.props.settings.is_authenticated) {\n          url = this.props.settings.flag_url.replace('0', this.props.data.id);\n        } else {\n          url = (this.props.settings.login_url + \"?next=\" +\n                 this.props.settings.flag_url.replace('0', this.props.data.id));\n        }\n        inapp_msg = django.gettext(\"flag comment as inappropriate\");\n        flagging_html = (\n          <a className=\"mutedlink\" href={url}>\n            <i className=\"fas fa-flag\" title={inapp_msg}></i></a>\n        );\n      }\n    }\n\n    if(this.props.settings.is_authenticated &&\n       this.props.settings.can_moderate)\n    {\n      let remove_msg = django.gettext(\"remove comment\");\n      url = this.props.settings.delete_url.replace('0', this.props.data.id);\n      moderate_html = (<a className=\"mutedlink\" href={url}>\n                         <i className=\"fas fa-trash-alt\" title={remove_msg}></i>\n                       </a>);\n    }\n\n    return (<div>{flagging_html} {moderate_html}</div>);\n  }\n\n  _get_feedback_chunk(dir) {\n    if(!this.props.settings.allow_feedback)\n      return \"\";\n    let attr_list = dir + \"_users\";  // Produce (dis)like_users\n    let show_users_chunk = \"\";\n\n    if(this.props.settings.show_feedback) {\n      /* Check whether the user is no longer liking/disliking the comment,\n       * and be sure the list list of users who liked/disliked the comment\n       * is up-to-date likewise.\n       */\n      let current_user_id = this.state.current_user.split(\":\")[0];\n      let user_ids = this.state[attr_list].map(function(item) {\n        return item.split(\":\")[0];\n      });\n      if(this.state[dir] &&            // If user expressed opinion, and\n         (user_ids.indexOf(current_user_id) == -1)) // user not included.\n      {                                       // Append user to the list.\n        this.state[attr_list].push(this.state.current_user);\n      } else if(!this.state[dir] &&     // If user has no opinion, and\n                (user_ids.indexOf(current_user_id) > -1)) // user included.\n      {                                   // Remove the user from the list.\n        var pos = user_ids.indexOf(current_user_id);\n        this.state[attr_list].splice(pos, 1);\n      }\n\n      if(this.state[attr_list].length) {\n        let users = this.state[attr_list].map(function(item) {\n          return item.split(\":\")[1];\n        });\n        users = users.join(\"<br/>\");\n        show_users_chunk = (\n          <span>&nbsp;<a className=\"badge badge-primary text-white cfb-counter\"\n                         data-toggle=\"tooltip\" title={users}>\n                        {this.state[attr_list].length}\n                      </a></span>\n        );\n      }\n    }\n\n    let css_class = this.state[dir] ? '' : 'mutedlink';\n    let icon = dir == 'like' ? 'thumbs-up' : 'thumbs-down';\n    let class_icon = \"fas fa-\"+icon;\n    let click_hdl = dir == 'like' ? this.action_like : this.action_dislike;\n    let opinion=\"\", link=\"#\";\n    if (dir == 'like')\n      opinion = django.gettext('I like it');\n    else opinion = django.gettext('I dislike it');\n\n    return (\n      <span>{show_users_chunk}&nbsp;<a href=\"#\" onClick={click_hdl}\n                                       className={css_class}>\n                                      <i className={class_icon} title={opinion}>\n                                      </i></a>&nbsp;</span>);\n  }\n\n  render_feedback_btns() {\n    if(this.props.settings.allow_feedback)\n    {\n      let feedback_id = \"feedback-\"+this.props.data.id;\n      if(this.props.settings.show_feedback)\n        this.disposeTooltips(feedback_id);\n      let like_feedback = this._get_feedback_chunk(\"like\");\n      let dislike_feedback = this._get_feedback_chunk(\"dislike\");\n      return (<span id={feedback_id} className=\"small\">{like_feedback}\n                <span className=\"text-muted\">|</span>{dislike_feedback}</span>);\n    } else\n      return \"\";\n  }\n\n  make_form_invisible(submit_status) {\n    // this.setState({reply_form: {component: this.state.reply_form.component,\n    //                             is_visible: false}});\n    this.props.on_comment_created();\n  }\n  \n  handle_reply_click(event) {\n    event.preventDefault();\n    let component = this.state.reply_form.component;\n    let visible = !this.state.reply_form.is_visible;\n    if(component == null)\n      component = (\n        <CommentForm {...this.props.settings}\n                     reply_to={this.props.data.id}\n                     on_comment_created={this.make_form_invisible.bind(this)} />\n      );\n    this.setState({reply_form: {component: component, is_visible: visible}});\n  }\n\n  _get_reply_link_chunk() {\n    if(!this.props.data.allow_reply)\n      return \"\";\n    \n    let url = this.props.settings.reply_url.replace('0', this.props.data.id),\n        reply_label = django.gettext(\"Reply\");\n    \n    if(this.props.settings.allow_feedback) {\n      return (\n        <span>&nbsp;&nbsp;<span className=\"text-muted\">&bull;</span>&nbsp;&nbsp;\n          <a className=\"small mutedlink\" href={url}\n             onClick={this.handle_reply_click}>{reply_label}</a>\n        </span>\n      );\n    } else {\n      return (<a className=\"small mutedlink\" href={url}\n              onClick={this.handle_reply_click}>{reply_label}</a>);\n    }\n  }\n\n  rawMarkup() {\n    var md = new Remarkable();\n    const rawMarkup = md.render(this.props.data.comment);\n    return { __html: rawMarkup };\n  }\n  \n  render_comment_body() {\n    let extra_space = \"\";\n    if(!this.props.data.allow_reply &&\n       !this.props.settings.allow_feedback)\n    {\n      extra_space = \"pb-3\";\n    }\n    if(this.props.data.is_removed) {\n      let cls = `text-muted ${extra_space}`;\n      return (\n        <p className={cls}><em>{this.props.data.comment}</em></p>\n      );\n    } else {\n      let cls = `content ${extra_space}`;\n      return (\n        <div className={cls} dangerouslySetInnerHTML={this.rawMarkup()}/>\n      );\n    }\n  }\n\n  render_reply_form() {\n    if(!this.state.reply_form.is_visible)\n      return \"\";\n    return (\n      <div>{this.state.reply_form.component}</div>\n    );\n  }\n  \n  _post_feedback(flag) {\n    $.ajax({\n      method: 'POST',\n      url: this.props.settings.feedback_url,\n      data: {comment: this.props.data.id, flag: flag},\n      dataType: 'json',\n      cache: false,\n      statusCode: {\n        201: function() {\n          let state = {};\n          if(flag=='like')\n            this.setState({like: true, dislike: false});\n          else if(flag=='dislike')\n            this.setState({dislike: true, like: false});\n        }.bind(this),\n        204: function() {\n          if(flag=='like')\n            this.setState({like: false});\n          else if(flag=='dislike')\n            this.setState({dislike: false});\n        }.bind(this)\n      },\n      error: function(xhr, status, err) {\n        if(xhr.status==400 && xhr.responseJSON.non_field_errors.length)\n          alert(xhr.responseJSON.non_field_errors[0]);\n        else\n          console.error(this.props.settings.feedback_url, status,\n                        err.toString());\n      }.bind(this)\n    });\n  }\n\n  action_like(event) {\n    event.preventDefault();\n    if(this.props.settings.is_authenticated)\n      return this._post_feedback('like');\n    else\n      return window.location.href = (\n        this.props.settings.login_url + \"?next=\" +\n        this.props.settings.like_url.replace('0', this.props.data.id)\n      );\n  }\n\n  action_dislike(event) {\n    event.preventDefault();\n    if(this.props.settings.is_authenticated)\n      return this._post_feedback('dislike');\n    else\n      return window.location.href = (\n        this.props.settings.login_url + \"?next=\" +\n        this.props.settings.dislike_url.replace('0', this.props.data.id)\n      );\n  }\n\n  is_hover(elem) {\n    return (elem.parentElement.querySelector(':hover') === elem);\n  }\n\n  disposeTooltips(feedback_id) {\n    // console.log(\"feedback_id = \"+feedback_id);\n    var elem = document.getElementById(feedback_id);\n    var is_hover = elem && this.is_hover(elem);\n    if(elem && !is_hover) {\n      $('#'+feedback_id+' A[data-toggle=\"tooltip\"]').tooltip('dispose');\n    }\n  }\n  \n  componentDidMount() {\n    var feedback_id = \"feedback-\" + this.props.data.id;\n    var options = {html: true, selector: '.cfb-counter'};\n    $('#'+feedback_id).tooltip(options);\n  }\n\n  componentDidUpdate() {\n    var feedback_id = \"feedback-\" + this.props.data.id;\n    var options = {html: true, selector: '.cfb-counter'};\n    $('#'+feedback_id).tooltip(options);\n  }\n  \n  componentWillUnmount() {\n    var feedback_id = \"feedback-\" + this.props.data.id;\n    var elem = document.getElementById(feedback_id);\n    var is_hover = elem && this.is_hover(elem);\n    if(elem && !is_hover) {\n      $('#'+feedback_id+' A[data-toggle=\"tooltip\"]').tooltip('dispose');\n    }\n  }\n  \n  render() {\n    let comment_id = \"c\" + this.props.data.id;\n    let user_name = this._get_username_chunk();  // Plain name or link.\n    let right_div = this._get_right_div_chunk();  // Flagging & moderation.\n    let comment_body = this.render_comment_body();\n    let feedback_btns = \"\",\n        reply_link = \"\",\n        reply_form = \"\";\n    if (!this.props.data.is_removed) {\n      feedback_btns = this.render_feedback_btns();\n      reply_link = this._get_reply_link_chunk();\n      reply_form = this.render_reply_form();\n    }\n\n    var new_label = \"\";\n    if (this.props.newcids.indexOf(this.props.data.id) > -1) {\n      new_label = (\n        <span>\n          <span className=\"badge badge-success\">new</span>&nbsp;-&nbsp;\n        </span>\n      );\n    }\n    \n    var children = \"\";\n    var settings = this.props.settings;\n    if (this.props.data.children != null) {\n      children = this.props.data.children.map(function(item) {\n        return (\n          <Comment key={item.id}\n                   data={item}\n                   settings={settings}\n                   newcids={this.props.newcids}\n                   on_comment_created={this.props.on_comment_created} />\n        );\n      }.bind(this));\n    }\n\n    return (\n      <div className=\"media\" id={comment_id}>\n        <img src={this.props.data.user_avatar}\n             className=\"mr-3\" height=\"48\" width=\"48\" />\n        <div className=\"media-body\">\n          <div className=\"comment pb-3\">\n            <a name={comment_id}></a>\n            <h6 className=\"mb-1 small d-flex\">\n              <div className=\"mr-auto\">\n                {new_label}{this.props.data.submit_date}&nbsp;-&nbsp;{user_name}\n                &nbsp;&nbsp;\n                <a className=\"permalink\" href={this.props.data.permalink}></a>\n              </div>\n              {right_div}\n            </h6>\n            {comment_body}{feedback_btns}{reply_link}\n            {reply_form}\n          </div>\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n","import $ from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as lib from './lib.js';\nimport django from 'django';\n\nimport {Comment} from './comment.jsx';\nimport {CommentForm} from './commentform.jsx';\n\n\nexport class CommentBox extends React.Component {\n  constructor(props) {\n    super(props);\n    lib.jquery_ajax_setup('csrftoken');\n    this.state = {\n      previewing: false,\n      preview: {name: '', email: '', url: '', comment: ''},\n      tree: [], cids: [], newcids: [], counter: this.props.comment_count\n    };\n    this.handle_comment_created = this.handle_comment_created.bind(this);\n    this.handle_preview = this.handle_preview.bind(this);\n    this.handle_update = this.handle_update.bind(this);\n  }\n\n  handle_comment_created() {\n    this.load_comments();\n  }\n  \n  handle_preview(name, email, url, comment) {\n    this.setState({\n      preview: {name: name, email: email, url: url, comment: comment},\n      previewing: true\n    });\n  }\n\n  handle_update(event) {\n    event.preventDefault();\n    this.load_comments();\n  }\n\n  reset_preview() {\n    this.setState({\n      preview: {name: '', email: '', url: '', comment: ''},\n      previewing: false\n    });\n  }\n\n  render_comment_counter() {\n    if (this.state.counter > 0) {\n      var fmts = django.ngettext(\"%s comment.\", \"%s comments.\",\n                                 this.state.cids.length);\n      var text = django.interpolate(fmts, [this.state.cids.length]);\n      return <h5 className=\"text-center\">{text}</h5>;\n    } else\n      return \"\";\n  }\n\n  render_comment_form() {\n    if(this.props.allow_comments) {\n      return (\n        <CommentForm {...this.props}\n                     on_comment_created={this.handle_comment_created} />\n      );\n    } else {\n      return (\n        <h5>Comments are disabled for this article.</h5>\n      );\n    }\n  }\n\n  render_update_alert() {\n    var diff = this.state.counter - this.state.cids.length;\n    if (diff > 0) {\n      var fmts = django.ngettext(\"There is %s new comment.\",\n                                 \"There are %s new comments.\", diff);\n      var message = django.interpolate(fmts, [diff]);\n      return (\n        <div className=\"alert alert-info d-flex align-items-center\">\n          <p className=\"mr-auto\">{message}</p>\n          <button type=\"button\" className=\"btn btn-secondary btn-xs\"\n                  onClick={this.handle_update}>update</button>\n        </div>\n      );\n    } else\n      return \"\";\n  }\n\n  create_tree(data) {\n    var tree = new Array();\n    var order = new Array();\n    var comments = {};\n    var children = {};\n    var incids = [], curcids = [], newcids = [];\n\n    function get_children(cid) {\n      return children[cid].map(function(index) {\n        if(comments[index].children == undefined) {\n          comments[index].children = get_children(index);\n        }\n        return comments[index];\n      });\n    };\n    \n    for (let item of data) {\n      incids.push(item.id);\n      comments[item.id] = item;\n      if (item.level == 0) {\n        order.push(item.id);\n      }\n      children[item.id] = [];\n      if (item.parent_id!==item.id) {\n        children[item.parent_id].push(item.id);\n      }\n    }\n    for (let id of order) {\n      comments[id].children = get_children(id);\n      tree.push(comments[id]);\n    }\n\n    // Update attributes curcids and newcids.\n    if (incids.length) {\n      if (this.state.cids.length) {\n        for (let id of incids) {\n          if (this.state.cids.indexOf(id) == -1)\n            newcids.push(id);\n          curcids.push(id);\n        }\n      } else {\n        curcids = incids;\n        newcids = [];\n      }\n    }\n\n    this.setState({tree:tree,\n                   cids: curcids,\n                   newcids: newcids,\n                   counter: curcids.length});\n  }\n\n  load_comments() {\n    $.ajax({\n      url: this.props.list_url,\n      dataType: 'json',\n      cache: false,\n      success: function(data) {\n        // Set here a cookie with the last time comments have been retrieved.\n        // I'll use it to add a label 'new' to every new comment received\n        // after the timestamp stored in the cookie.\n        this.create_tree(data);\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.list_url, status, err.toString());\n      }.bind(this)\n    });\n  }\n\n  load_count() {\n    $.ajax({\n      url: this.props.count_url,\n      dataType: 'json',\n      cache: false,\n      success: function(data) {\n        this.setState({counter: data.count});\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.count_url, status, err.toString());\n      }.bind(this)\n    });\n  }\n  \n  componentDidMount() {\n    this.load_comments();\n    if(this.props.polling_interval)\n      setInterval(this.load_count.bind(this), this.props.polling_interval);\n  }\n  \n  render() {\n    var settings = this.props;\n    var comment_counter = this.render_comment_counter();\n    var update_alert = this.render_update_alert();\n    var comment_form = this.render_comment_form();\n\n    var nodes = this.state.tree.map(function(item) {\n      return (\n        <Comment key={item.id}\n                 data={item}\n                 settings={settings}\n                 newcids={this.state.newcids}\n                 on_comment_created={this.handle_comment_created} />\n      );\n    }.bind(this));\n    \n    return (\n      <div>\n        {comment_counter}\n        {comment_form}\n        {update_alert}\n        <div className=\"comment-tree\">\n          <div className=\"media-list\">\n            {nodes}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {CommentBox} from './commentbox.jsx';\n\n\nReactDOM.render(\n  React.createElement(CommentBox,\n                      Object.assign(window.comments_props,\n                                    window.comments_props_override)),\n  document.getElementById('comments')\n);\n"],"sourceRoot":""}